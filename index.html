<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIAMOND OMNI v3.0 - ARCHITECT</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';</script>
</head>
<body>
    <canvas id="nano-canvas"></canvas>

    <div id="main-app" class="app-window ani-pop-in">
        <header class="diamond-header">
            <h1 class="glitch-text">DIAMOND OMNI <span class="v-tag">v3.0</span></h1>
            <div class="header-line"></div>
        </header>

        <nav class="nav-bar">
            <button class="nav-item active" onclick="ui.switchTab('home')">DASHBOARD</button>
            <button class="nav-item" onclick="ui.switchTab('history')">LỊCH SỬ & BXH</button>
        </nav>

        <div id="tab-home" class="tab-content active">
            <div class="control-grid">
                <div class="input-field full"><label>Tiêu đề</label><input type="text" id="q-title" value="Kỳ thi Diamond"></div>
                <div class="input-field" id="file-box"><label>File nguồn</label><input type="file" id="f-upload"></div>
                <div class="input-field"><label>Số câu</label><input type="number" id="q-count" value="10"></div>
                <div class="input-field"><label>Thời gian</label><input type="number" id="q-time" value="15"></div>
                <div class="input-field"><label>Chế độ AI</label>
                    <select id="q-mode">
                        <option value="content">Tiêu chuẩn</option>
                        <option value="hard">Thử thách (Hard)</option>
                    </select>
                </div>
                <textarea id="q-prompt" class="full" placeholder="Dán nội dung hoặc yêu cầu bổ sung..."></textarea>
            </div>
            <div class="btn-group">
                <button class="btn-sub" onclick="app.openEditor()">EDITOR</button>
                <button id="btn-run" class="btn-gold">KÍCH HOẠT HỆ THỐNG</button>
            </div>
        </div>

        <div id="tab-history" class="tab-content">
            <div class="history-container custom-scroll" id="history-list">
                </div>
        </div>
    </div>

    <div id="pop-workspace" class="overlay hidden">
        <div class="workspace-window ani-pop-in">
            <div class="ws-header">
                <h2 id="ws-title">---</h2>
                <div id="ws-timer">00:00</div>
            </div>
            <div id="ws-body" class="custom-scroll"></div>
            <div class="ws-footer">
                <button class="btn-gold" onclick="app.submit()">NỘP BÀI & XUẤT PDF</button>
            </div>
        </div>
    </div>

    <div id="pop-alert" class="overlay hidden">
        <div class="alert-box">
            <div id="alert-icon">!</div>
            <h3 id="alert-title">THÔNG BÁO</h3>
            <p id="alert-msg">Nội dung...</p>
            <button class="btn-gold" id="alert-ok">XÁC NHẬN</button>
        </div>
    </div>

    <div id="pop-loading" class="overlay hidden">
        <div class="loading-box">
            <div class="diamond-loader"></div>
            <p id="load-status">Đang mô phỏng dữ liệu...</p>
            <div class="p-bar"><div id="p-fill"></div></div>
        </div>
    </div>

    <div id="pop-editor" class="overlay hidden">
        <div class="editor-window">
            <button class="btn-x" onclick="ui.hide('pop-editor')">✕</button>
            <h3>TRÌNH CHỈNH SỬA</h3>
            <div id="edit-area" class="custom-scroll"></div>
            <div class="edit-footer"><button id="btn-save-edit" class="btn-gold hidden">LƯU THAY ĐỔI</button></div>
        </div>
    </div>

    <div id="pop-auth" class="overlay hidden">
        <div class="auth-box">
            <h3>DANH TÍNH</h3>
            <input type="text" id="u-name" placeholder="Nhập tên của bạn...">
            <button class="btn-gold" onclick="app.verifyAndStart()">BẮT ĐẦU NGAY</button>
        </div>
    </div>

    <script src="ai-engine.js"></script>
    <script src="script.js"></script>
</body>
</html>
