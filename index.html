<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTTN181 v1 - Huy Ultimate System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';</script>
</head>
<body>
    <canvas id="nano-canvas"></canvas>

    <main class="container">
        <header class="header-main">
            <h1>OTTN181 <span class="v-tag">v1</span></h1>
            <p class="author">t√°c gi·∫£ Huy ‚òÖ</p>
        </header>

        <section id="control-panel" class="square-box active">
            <h2 class="panel-header">B·∫¢NG ƒêI·ªÄU CH·ªàNH</h2>
            
            <div class="control-grid">
                <div class="input-group full">
                    <label>T√™n b√†i tr·∫Øc nghi·ªám</label>
                    <input type="text" id="quiz-title" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ cho ƒë·ªÅ thi n√†y...">
                </div>

                <div class="input-group">
                    <label>T·∫£i file l√™n</label>
                    <input type="file" id="file-upload">
                </div>

                <div class="input-group">
                    <label>S·ªë c√¢u h·ªèi</label>
                    <input type="number" id="q-count" value="10">
                </div>

                <div class="input-group">
                    <label>Th·ªùi gian (ph√∫t)</label>
                    <input type="number" id="q-time" value="15">
                </div>

                <div class="input-group">
                    <label>Ch·∫ø ƒë·ªô l√†m b√†i</label>
                    <select id="quiz-mode">
                        <option value="content">Ch·∫ø ƒë·ªô theo n·ªôi dung</option>
                        <option value="expand">Ch·∫ø ƒë·ªô m·ªü r·ªông</option>
                        <option value="hard">Ch·∫ø ƒë·ªô kh√≥</option>
                    </select>
                </div>

                <div class="input-group full">
                    <label>M·∫≠t kh·∫©u b√†i l√†m (T·∫°o m·∫≠t kh·∫©u tr∆∞·ªõc khi v√†o ƒë·ªÅ)</label>
                    <input type="password" id="quiz-pass" placeholder="Nh·∫≠p m·∫≠t kh·∫©u n·∫øu mu·ªën b·∫£o m·∫≠t...">
                </div>

                <div class="input-group full flex-row">
                    <label class="cb-label"><input type="checkbox" id="mix-q" checked> X√°o tr·ªôn c√¢u h·ªèi</label>
                    <label class="cb-label"><input type="checkbox" id="mix-a" checked> X√°o tr·ªôn c√¢u tr·∫£ l·ªùi</label>
                </div>

                <div class="input-group full highlight">
                    <label>Y√™u c·∫ßu m·ªü r·ªông/T·∫°o m·ªõi (AI l√†m b√†i kh√¥ng theo t√†i li·ªáu)</label>
                    <textarea id="ai-prompt" placeholder="Huy mu·ªën AI m·ªü r·ªông th√™m g√¨? Ho·∫∑c y√™u c·∫ßu AI t·∫°o ƒë·ªÅ m·ªõi ho√†n to√†n t·∫°i ƒë√¢y..."></textarea>
                </div>
            </div>

            <div class="actions-grid">
                <button class="btn-sub" onclick="app.checkEditCondition()">CH·ªàNH S·ª¨A ƒê√ÅP √ÅN</button>
                <button class="btn-sub" onclick="app.share()">CHIA S·∫∫</button>
                <button class="btn-sub" onclick="location.reload()">L√ÄM L·∫†I</button>
                <button id="btn-run" class="btn-gold">K√çCH HO·∫†T AI & T·∫†O B√ÄI</button>
            </div>
        </section>

        <section id="workspace" class="hidden">
            <div class="quiz-status glass">
                <h3 id="display-title">---</h3>
                <div id="display-timer">00:00</div>
            </div>
            <div id="quiz-render-area"></div>
            <button id="btn-done" class="btn-gold">N·ªòP B√ÄI K·∫æT TH√öC</button>
        </section>

        <section class="square-box">
            <h3 class="panel-header">üèÜ L·ªäCH S·ª¨ & X·∫æP H·∫†NG</h3>
            <div id="leaderboard-ui"></div>
        </section>
    </main>

    <div id="pop-loading" class="overlay hidden">
        <div class="popup-box">
            <div class="loader"></div>
            <h3>AI ƒêANG L√ÄM VI·ªÜC...</h3>
            <p id="load-txt">ƒêang ph√¢n t√≠ch...</p>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>

    <div id="pop-name" class="overlay hidden">
        <div class="popup-box">
            <h3>DANH T√çNH NG∆Ø·ªúI L√ÄM</h3>
            <p>Nh·∫≠p t√™n tr∆∞·ªõc khi v√†o l√†m b√†i</p>
            <input type="text" id="user-name" placeholder="T√™n c·ªßa b·∫°n l√† g√¨?">
            <div class="pop-actions">
                <button class="btn-gold" onclick="app.confirmEntry()">OK B·∫ÆT ƒê·∫¶U</button>
                <button class="btn-sub" onclick="app.confirmEntry(true)">B·ªé QUA</button>
            </div>
        </div>
    </div>

    <div id="pop-error" class="overlay hidden">
        <div class="popup-box error">
            <h3>C·∫¢NH B√ÅO ƒêI·ªÄU KI·ªÜN!</h3>
            <p>Huy ∆°i, c·∫ßn c√≥ c√¢u h·ªèi t·ª´ AI tr∆∞·ªõc m·ªõi c√≥ th·ªÉ Ch·ªânh s·ª≠a ƒë∆∞·ª£c nh√©!</p>
            <button class="btn-gold" onclick="ui.close('pop-error')">ƒê√É HI·ªÇU (OK)</button>
        </div>
    </div>

    <div id="pop-editor" class="overlay hidden">
        <div class="popup-box wide">
            <h3>TR√åNH CH·ªàNH S·ª¨A ƒê√ÅP √ÅN</h3>
            <div id="editor-area" class="scrollable"></div>
            <button class="btn-gold" onclick="ui.close('pop-editor')">X√ÅC NH·∫¨N S·ª¨A XONG</button>
        </div>
    </div>

    <div id="pop-result" class="overlay hidden">
        <div class="popup-box">
            <div class="score-tag" id="score-val">0</div>
            <h2 id="score-msg">L√†m t·ªët l·∫Øm!</h2>
            <div class="pop-actions">
                <button class="btn-sub" onclick="location.reload()">L√ÄM L·∫†I M·ªöI</button>
                <button class="btn-gold" onclick="ui.close('pop-result')">XEM ƒê√ÅP √ÅN</button>
            </div>
        </div>
    </div>

    <script src="ai-engine.js"></script>
    <script src="script.js"></script>
</body>
</html>

